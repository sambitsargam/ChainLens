# ğŸ”— ChainLens

Compare Wikipedia vs Grokipedia articles using **3 AI models in parallel**, publish verified insights to OriginTrail DKG, and monetize with **X402 payments**.

## âœ¨ Key Features

- **Multi-Model LLM Analysis** - OpenAI, Gemini, Grok working together in parallel
- **Consensus Voting** - Majority voting system for high-confidence results
- **DKG Publishing** - Immutable knowledge assets on OriginTrail blockchain
- **X402 Premium Payments** - Cryptocurrency-based subscription via HTTP 402 protocol
- **Knowledge Retriever** - Smart content extraction and analysis
- **Real-time Classification** - Detects: factual inconsistencies, missing context, bias, hallucinations

---

## ğŸš€ Quick Start

### Prerequisites
- Node.js v18+
- API Keys: OpenAI, Google Gemini, Grok
- OriginTrail Edge Node (local or remote)
- X402 wallet address (for payments)

### Setup

**1. Backend**
```bash
cd backend
npm install
cp .env.example .env
# Edit .env with your API keys and X402 config
npm start  # Runs on port 3001
```

**2. Frontend**
```bash
cd frontend
npm install
npm run dev  # Runs on port 5173
```

### Usage
1. Open http://localhost:5173
2. Select a topic or create a custom one
3. Click "Run Comparison & Publish Note"
4. View results with all 3 model consensus votes
5. Publish to OriginTrail DKG
6. (Optional) Upgrade to Premium via X402 for unlimited publishing

---

## ğŸ“Š How It Works

```
Wikipedia Article
       â”‚
       â”œâ”€â†’ [Knowledge Retriever] â†â”€ Grokipedia Article
       â”‚
       â–¼
Identify Discrepancies
       â”‚
       â”œâ”€â†’ [OpenAI]  â”
       â”œâ”€â†’ [Gemini]  â”œâ”€â†’ Majority Vote â†’ Consensus
       â”œâ”€â†’ [Grok]    â”˜
       â”‚
       â–¼
Generate Community Note
       â”‚
       â–¼
Publish to DKG (OriginTrail)
```

**Result**: Alignment score + Discrepancy classifications + UAL

---

## ğŸ’³ X402 Premium Features

### Subscription Tiers

| Feature | Free | Premium | Pro |
|---------|------|---------|-----|
| DKG Publishing | 5/month | Unlimited | Unlimited |
| Advanced Analysis | 3/month | Unlimited | Unlimited |
| Grokipedia Access | 10/month | Unlimited | Unlimited |
| Batch Verification | 1/month | Unlimited | Unlimited |
| Support | Community | Standard | 24/7 Priority |
| Price | Free | $19.99/mo | $49.99/mo |

### X402 Payment Integration
- Secure HTTP 402 payment protocol
- Base Sepolia network
- USDC payments
- Blockchain-verified transactions

---

## ğŸ”§ Environment Setup

### Backend `.env`
```env
PORT=3001
NODE_ENV=development
OPENAI_API_KEY=sk-...
GEMINI_API_KEY=AIzaSy...
GROK_API_KEY=gsk_...

# X402 Configuration
X402_WALLET_ADDRESS=0x44CBd027D65F0Aeb0AC3deEb02a3247871F00f48
X402_FACILITATOR_URL=https://x402.org/facilitator
X402_NETWORK=base-sepolia

# DKG Configuration
DKG_ENDPOINT=http://localhost
DKG_PORT=8900
DKG_ENVIRONMENT=local
```

### Frontend `.env`
```env
VITE_API_BASE_URL=http://localhost:3001
VITE_OPENAI_API_KEY=sk-...
VITE_GEMINI_API_KEY=AIzaSy...
VITE_GROK_API_KEY=gsk_...
```

---

## ğŸ“ Project Structure

```
backend/
â”œâ”€â”€ src/routes/
â”‚   â”œâ”€â”€ classify.js        # 3-model classification endpoint
â”‚   â”œâ”€â”€ premium.js         # X402 premium features
â”‚   â””â”€â”€ scraper.js         # Content fetchers
â”œâ”€â”€ src/config/
â”‚   â””â”€â”€ x402-config.js     # X402 payment configuration
â”œâ”€â”€ src/services/
â”‚   â”œâ”€â”€ llm.js             # LLM service (all 3 models)
â”‚   â””â”€â”€ dkg.js             # OriginTrail publisher
â””â”€â”€ .env

frontend/
â”œâ”€â”€ src/pages/
â”‚   â”œâ”€â”€ ComparisonDashboard.jsx
â”‚   â”œâ”€â”€ PremiumPage.jsx
â”‚   â””â”€â”€ LandingPage.jsx
â”œâ”€â”€ src/services/
â”‚   â”œâ”€â”€ wikipedia.js
â”‚   â”œâ”€â”€ grokipedia.js
â”‚   â”œâ”€â”€ comparison.js
â”‚   â””â”€â”€ dkg.js
â”œâ”€â”€ src/config/
â”‚   â””â”€â”€ x402-config.js     # X402 frontend config
â””â”€â”€ .env
```

---

## ğŸ§ª Testing

### Quick Test
```bash
./test-llm.sh
```

### Manual Test
```bash
# Check API configuration
curl http://localhost:3001/api/health

# Test classification
curl -X POST http://localhost:3001/api/classify \
  -H "Content-Type: application/json" \
  -d '{"discrepancies":["Claim"],"context":"Context"}'
```

---

## ğŸ“ˆ API Endpoints

| Endpoint | Method | Purpose |
|----------|--------|---------|
| `/api/classify` | POST | Classify discrepancies with all 3 models |
| `/api/publishnote` | POST | Publish to DKG (requires X402 payment) |
| `/api/analysis/advanced` | POST | Advanced analysis (X402 premium) |
| `/api/batch-verify` | POST | Batch verification (X402 premium) |

---

## ğŸ¯ Classification Categories

- **Factual Inconsistency** - Claims contradict established facts
- **Missing Context** - True but incomplete information
- **Hallucination** - False information generated by source
- **Bias** - Subjective or prejudiced framing
- **Aligned** - Both sources agree

---

## ğŸ” Security & Payments

- **API Keys**: Use environment variables only
- **CORS**: Configure for production domains
- **Rate Limiting**: Built-in with exponential backoff
- **X402 Payments**: Blockchain-verified transactions
- **DKG Keys**: Keep private keys secure

---

## ğŸ“š Documentation

See additional guides for detailed information on LLM testing, DKG publishing, and payment integration.

---

## ğŸš€ Production

**Backend**:
- Set `NODE_ENV=production`
- Use process manager (PM2)
- Enable logging and monitoring
- Configure reverse proxy (nginx)

**Frontend**:
- Run `npm run build`
- Serve via CDN
- Enable compression

---

## ğŸ“Š Expected Output

```
ğŸ¤– LLM Analysis Results

3 models analyzed âœ…

Consensus: Factual Inconsistency
Confidence: 95%

Model Votes:
âœ“ OpenAI: Factual Inconsistency
âœ“ Gemini: Factual Inconsistency  
âœ“ Grok: Factual Inconsistency

Published to DKG:
UAL: did:dkg:otp/0x1234.../12345
```

---

## ğŸ¤ Contributing

Areas for improvement:
- Additional LLM providers
- Enhanced text comparison algorithms
- Advanced DKG queries
- Database integration
- Performance optimization

---

## ğŸ“„ License

MIT License - see [LICENSE](./LICENSE)

---

## ğŸ”— Resources

- [OriginTrail DKG](https://www.origintrail.io/)
- [X402 Protocol](https://www.x402.org/)
- [OpenAI API](https://platform.openai.com/)
- [Google Gemini](https://ai.google.dev/)
- [Grok API](https://www.groq.com/)

---

**Built for Truth** â€¢ Multi-Model LLM Consensus â€¢ X402 Payments â€¢ OriginTrail DKG â€¢ 2025
